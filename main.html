<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<title>Google Drive API Test</title>

<script src="https://accounts.google.com/gsi/client"></script>
<script src="https://apis.google.com/js/api.js"></script>

<style>
body{font-family:sans-serif;padding:20px}
button{margin-right:10px}
</style>
</head>
<body>

<h3>Google Drive Test</h3>
<button onclick="login()">Login Google</button>
<button onclick="createTestFile()">Create Test File</button>
<p id="status"></p>

<script>
/* ===== CONFIG ===== */
const CLIENT_ID = "740899492808-qoi3pjpfbe2sp8e8e4q43tr2sm0cnuhl.apps.googleusercontent.com";
const FOLDER_ID = "1PQWNipWJ3f6HvS_g8j3eC4_eKJ7NVC79";
const SCOPES = "https://www.googleapis.com/auth/drive.file";

let tokenClient;

/* ===== INIT ===== */
gapi.load("client", async () => {
  await gapi.client.init({
    discoveryDocs: [
      "https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"
    ]
  });
});

tokenClient = google.accounts.oauth2.initTokenClient({
  client_id: CLIENT_ID,
  scope: SCOPES,
  callback: token => {
    gapi.client.setToken(token);
    status("Login สำเร็จ");
  }
});

function login(){
  tokenClient.requestAccessToken();
}

/* ===== TEST CREATE FILE ===== */
async function createTestFile(){
  await gapi.client.drive.files.create({
    resource:{
      name:"test.txt",
      parents:[FOLDER_ID]
    },
    media:{
      mimeType:"text/plain",
      body:"Google Drive API Test OK"
    }
  });
  status("สร้างไฟล์ test.txt ใน Drive แล้ว");
}

function status(t){
  document.getElementById("status").innerText = t;
}
</script>
</body>
</html>
